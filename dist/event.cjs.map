{"version":3,"file":"event.cjs","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    element: HTMLElement\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor(element: HTMLElement) {\n        this.active = false\n        this.element = element\n        this.element.addEventListener('mousedown', this.#start)\n        document.addEventListener('mousemove', this.#move)\n        document.addEventListener('mouseup', this.#end)\n        document.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        this.element.removeEventListener('mousedown', this.#start)\n        document.removeEventListener('mousemove', this.#move)\n        document.removeEventListener('mouseup', this.#end)\n        document.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #onZoom?: (e: WheelEvent) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('wheel', this.#wheel)\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string) {\n        this.keyCode = keyCode\n        document.addEventListener('keydown', this.#keyDown)\n        document.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('keydown', this.#keyDown)\n        document.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","constructor","element","active","init","__privateAdd","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","#start","e","button","__privateGet","_move","_end","_leave","removeEvent","removeEventListener","addEventListener","onPanStart","__privateSet","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","ctrlKey","preventDefault","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","code","_keyUp","onKeyDown","onKeyUp"],"mappings":"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"}