{"version":3,"file":"event.cjs","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('mousedown', this.#start)\n        document.addEventListener('mousemove', this.#move)\n        document.addEventListener('mouseup', this.#end)\n        document.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            // this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        document.removeEventListener('mousedown', this.#start)\n        document.removeEventListener('mousemove', this.#move)\n        document.removeEventListener('mouseup', this.#end)\n        document.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #onZoom?: (e: WheelEvent) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('wheel', this.#wheel, { passive: false })\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string) {\n        this.keyCode = keyCode\n        document.addEventListener('keydown', this.#keyDown)\n        document.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('keydown', this.#keyDown)\n        document.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","__publicField","__privateAdd","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","init","__privateGet","_move","_end","_leave","onPanStart","__privateSet","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","_keyUp","onKeyDown","onKeyUp"],"mappings":"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"}