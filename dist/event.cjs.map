{"version":3,"file":"event.cjs","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    #container: HTMLElement\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor(container?: HTMLElement) {\n        this.active = false\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('mousedown', this.#start)\n        this.#container.addEventListener('mousemove', this.#move)\n        this.#container.addEventListener('mouseup', this.#end)\n        this.#container.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            // this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        this.#container.removeEventListener('mousedown', this.#start)\n        this.#container.removeEventListener('mousemove', this.#move)\n        this.#container.removeEventListener('mouseup', this.#end)\n        this.#container.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #container: HTMLElement\n    #onZoom?: (e: WheelEvent) => void\n    constructor(container?: HTMLElement) {\n        this.active = false\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('wheel', this.#wheel, { passive: false })\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        this.#container.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #container: HTMLElement\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string, container?: HTMLElement) {\n        this.keyCode = keyCode\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('keydown', this.#keyDown)\n        this.#container.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        this.#container.removeEventListener('keydown', this.#keyDown)\n        this.#container.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","container","__privateAdd","_container","__publicField","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","init","__privateGet","_move","_end","_leave","__privateSet","onPanStart","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","_keyUp","onKeyDown","onKeyUp"],"mappings":"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"}