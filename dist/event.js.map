{"version":3,"file":"event.js","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    #container: HTMLElement\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor(container?: HTMLElement) {\n        this.active = false\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('mousedown', this.#start)\n        this.#container.addEventListener('mousemove', this.#move)\n        this.#container.addEventListener('mouseup', this.#end)\n        this.#container.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            // this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        this.#container.removeEventListener('mousedown', this.#start)\n        this.#container.removeEventListener('mousemove', this.#move)\n        this.#container.removeEventListener('mouseup', this.#end)\n        this.#container.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #container: HTMLElement\n    #onZoom?: (e: WheelEvent) => void\n    constructor(container?: HTMLElement) {\n        this.active = false\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('wheel', this.#wheel, { passive: false })\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        this.#container.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #container: HTMLElement\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string, container?: HTMLElement) {\n        this.keyCode = keyCode\n        this.#container = container ? container : document as any\n        this.#container.addEventListener('keydown', this.#keyDown)\n        this.#container.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        this.#container.removeEventListener('keydown', this.#keyDown)\n        this.#container.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","container","__privateAdd","_container","__publicField","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","e","init","__privateGet","_move","_end","_leave","__privateSet","onPanStart","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","_keyUp","onKeyDown","onKeyUp"],"mappings":"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"}