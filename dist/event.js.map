{"version":3,"file":"event.js","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('mousedown', this.#start)\n        document.addEventListener('mousemove', this.#move)\n        document.addEventListener('mouseup', this.#end)\n        document.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        document.removeEventListener('mousedown', this.#start)\n        document.removeEventListener('mousemove', this.#move)\n        document.removeEventListener('mouseup', this.#end)\n        document.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #onZoom?: (e: WheelEvent) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('wheel', this.#wheel)\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string) {\n        this.keyCode = keyCode\n        document.addEventListener('keydown', this.#keyDown)\n        document.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('keydown', this.#keyDown)\n        document.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","constructor","active","init","__privateAdd","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","#start","e","button","__privateGet","_move","#move","_end","#end","_leave","#leave","removeEvent","removeEventListener","addEventListener","onPanStart","__privateSet","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","#wheel","ctrlKey","preventDefault","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","#keyDown","code","_keyUp","#keyUp","onKeyDown","onKeyUp"],"mappings":"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"}