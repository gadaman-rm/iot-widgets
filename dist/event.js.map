{"version":3,"file":"event.js","sources":["../src/event/PanListener.ts","../src/event/ZoomListener.ts","../src/event/KeyShortcatListener.ts"],"sourcesContent":["export class PanListener<Init = undefined>{\n    active: boolean\n    init?: Init\n    #onPanStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onPanMove?: (e: MouseEvent, init?: Init) => void\n    #onPanEnd?: (e: MouseEvent, init?: Init) => void\n    #onPanLeave?: (e: MouseEvent, init?: Init) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('mousedown', this.#start)\n        document.addEventListener('mousemove', this.#move)\n        document.addEventListener('mouseup', this.#end)\n        document.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onPanStart(onPanStart : (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onPanStart = onPanStart\n    }\n\n    public set onPanMove(onPanMove : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanMove = onPanMove\n    }\n\n    public set onPanEnd(onPanEnd : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanEnd = onPanEnd\n    }\n\n    public set onPanLeave(onPanLeave : (e: MouseEvent, init?: Init) => void) {\n        this.#onPanLeave = onPanLeave\n    }\n    \n    #start = (e: MouseEvent, init?: Init) => {\n        if(e.button === 1 && !this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onPanStart) this.#onPanStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onPanMove) this.#onPanMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            this.active = false\n            if (this.#onPanEnd) this.#onPanEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (e.button === 1 && this.active) {\n            // this.active = false\n            if (this.#onPanLeave) this.#onPanLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        document.removeEventListener('mousedown', this.#start)\n        document.removeEventListener('mousemove', this.#move)\n        document.removeEventListener('mouseup', this.#end)\n        document.removeEventListener('mouseleave', this.#leave)\n    }\n}\n","export class ZoomListener {\n    active: boolean\n    #onZoom?: (e: WheelEvent) => void\n    constructor() {\n        this.active = false\n        document.addEventListener('wheel', this.#wheel, { passive: false })\n    }\n\n    public set onZoom(onZoom: (e: WheelEvent) => void) {\n        this.#onZoom = onZoom\n    }\n\n    #wheel = (e: WheelEvent) => {\n        if (e.ctrlKey) {\n            e.preventDefault()\n            this.active = true\n        } else {\n            this.active = false\n        }\n\n        if (this.active) if (this.#onZoom) this.#onZoom(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('wheel', this.#wheel)\n    }\n}\n","export class KeyShortcatListener {\n    keyCode: string\n    #onKeyDown?: (e: KeyboardEvent) => void\n    #onKeyUp?: (e: KeyboardEvent) => void\n    constructor(keyCode: string) {\n        this.keyCode = keyCode\n        document.addEventListener('keydown', this.#keyDown)\n        document.addEventListener('keyup', this.#keyUp)\n    }\n\n    public set onKeyDown(onKeyDown: (e: KeyboardEvent) => void) {\n        this.#onKeyDown = onKeyDown\n    }\n\n    public set onKeyUp(onKeyUp: (e: KeyboardEvent) => void) {\n        this.#onKeyUp = onKeyUp\n    }\n\n    #keyDown = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyDown) this.#onKeyDown(e)\n    }\n\n    #keyUp = (e: KeyboardEvent) => {\n        if (e.code === this.keyCode) if (this.#onKeyUp) this.#onKeyUp(e)\n    }\n\n    removeEvent = () => {\n        document.removeEventListener('keydown', this.#keyDown)\n        document.removeEventListener('keyup', this.#keyUp)\n    }\n}\n"],"names":["PanListener","__publicField","__privateAdd","_onPanStart","_onPanMove","_onPanEnd","_onPanLeave","_start","init","__privateGet","_move","_end","_leave","onPanStart","__privateSet","onPanMove","onPanEnd","onPanLeave","ZoomListener","_onZoom","_wheel","onZoom","KeyShortcatListener","keyCode","_onKeyDown","_onKeyUp","_keyDown","_keyUp","onKeyDown","onKeyUp"],"mappings":"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"}