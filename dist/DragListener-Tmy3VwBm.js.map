{"version":3,"file":"DragListener-Tmy3VwBm.js","sources":["../src/event/DragListener.ts"],"sourcesContent":["export class DragListener<Init = undefined>{\n    element: HTMLElement\n    active: boolean\n    init?: Init\n    #onDragStart?: (e: MouseEvent, initFn: (init: Init) => Init) => void\n    #onDragMove?: (e: MouseEvent, init?: Init) => void\n    #onDragEnd?: (e: MouseEvent, init?: Init) => void\n    #onDragLeave?: (e: MouseEvent, init?: Init) => void\n    constructor(element: HTMLElement) {\n        this.active = false\n        this.element = element\n        this.element.addEventListener('mousedown', this.#start)\n        document.addEventListener('mousemove', this.#move)\n        document.addEventListener('mouseup', this.#end)\n        document.addEventListener('mouseleave', this.#leave)\n    }\n\n    public set onDragStart(onDragStart: (e: MouseEvent, initFn: (init: Init) => Init) => void) {\n        this.#onDragStart = onDragStart\n    }\n\n    public set onDragMove(onDragMove: (e: MouseEvent, init?: Init) => void) {\n        this.#onDragMove = onDragMove\n    }\n\n    public set onDragEnd(onDragEnd: (e: MouseEvent, init?: Init) => void) {\n        this.#onDragEnd = onDragEnd\n    }\n\n    public set onDragLeave(onDragLeave: (e: MouseEvent, init?: Init) => void) {\n        this.#onDragLeave = onDragLeave\n    }\n\n    #start = (e: MouseEvent, init?: Init) => {\n        if (!this.active) {\n            this.active = true\n            this.init = init\n            if (this.#onDragStart) this.#onDragStart(e, (init) => this.init = init)\n        }\n    }\n    #move = (e: MouseEvent) => {\n        if (this.active) {\n            if (this.#onDragMove) this.#onDragMove(e, this.init)\n        }\n    }\n    #end = (e: MouseEvent) => {\n        if (this.active) {\n            this.active = false\n            if (this.#onDragEnd) this.#onDragEnd(e, this.init)\n        }\n    }\n    #leave = (e: MouseEvent) => {\n        if (this.active) {\n            // this.active = false\n            if (this.#onDragLeave) this.#onDragLeave(e, this.init)\n        }\n    }\n    removeEvent = () => {\n        this.element.removeEventListener('mousedown', this.#start)\n        document.removeEventListener('mousemove', this.#move)\n        document.removeEventListener('mouseup', this.#end)\n        document.removeEventListener('mouseleave', this.#leave)\n    }\n}\n"],"names":["_onDragStart","_onDragMove","_onDragEnd","_onDragLeave","_start","_move","_end","_leave","DragListener","element","__publicField","__privateAdd","init","__privateGet","onDragStart","__privateSet","onDragMove","onDragEnd","onDragLeave"],"mappings":";;;;;;;;;;;AAAO,IAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAAA,MAAMC,EAA8B;AAAA,EAQvC,YAAYC,GAAsB;AAPlC,IAAAC,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAC,EAAA,MAAAX,GAAA;AACA,IAAAW,EAAA,MAAAV,GAAA;AACA,IAAAU,EAAA,MAAAT,GAAA;AACA,IAAAS,EAAA,MAAAR,GAAA;AA0BA,IAAAQ,EAAA,MAAAP,GAAS,CAAC,GAAeQ,MAAgB;AACjC,MAAC,KAAK,WACN,KAAK,SAAS,IACd,KAAK,OAAOA,GACRC,EAAA,MAAKb,MAAca,EAAA,MAAKb,GAAL,WAAkB,GAAG,CAACY,MAAS,KAAK,OAAOA;AAAAA,IACtE;AAEJ,IAAAD,EAAA,MAAAN,GAAQ,CAAC,MAAkB;AACvB,MAAI,KAAK,UACDQ,EAAA,MAAKZ,MAAkBY,EAAA,MAAAZ,GAAA,WAAY,GAAG,KAAK;AAAA,IACnD;AAEJ,IAAAU,EAAA,MAAAL,GAAO,CAAC,MAAkB;AACtB,MAAI,KAAK,WACL,KAAK,SAAS,IACVO,EAAA,MAAKX,MAAiBW,EAAA,MAAAX,GAAA,WAAW,GAAG,KAAK;AAAA,IACjD;AAEJ,IAAAS,EAAA,MAAAJ,GAAS,CAAC,MAAkB;AACxB,MAAI,KAAK,UAEDM,EAAA,MAAKV,MAAmBU,EAAA,MAAAV,GAAA,WAAa,GAAG,KAAK;AAAA,IACrD;AAEJ,IAAAO,EAAA,qBAAc,MAAM;AAChB,WAAK,QAAQ,oBAAoB,aAAaG,EAAA,MAAKT,EAAM,GAChD,SAAA,oBAAoB,aAAaS,EAAA,MAAKR,EAAK,GAC3C,SAAA,oBAAoB,WAAWQ,EAAA,MAAKP,EAAI,GACxC,SAAA,oBAAoB,cAAcO,EAAA,MAAKN,EAAM;AAAA,IAAA;AApDtD,SAAK,SAAS,IACd,KAAK,UAAUE,GACf,KAAK,QAAQ,iBAAiB,aAAaI,EAAA,MAAKT,EAAM,GAC7C,SAAA,iBAAiB,aAAaS,EAAA,MAAKR,EAAK,GACxC,SAAA,iBAAiB,WAAWQ,EAAA,MAAKP,EAAI,GACrC,SAAA,iBAAiB,cAAcO,EAAA,MAAKN,EAAM;AAAA,EACvD;AAAA,EAEA,IAAW,YAAYO,GAAoE;AACvF,IAAAC,EAAA,MAAKf,GAAec;AAAA,EACxB;AAAA,EAEA,IAAW,WAAWE,GAAkD;AACpE,IAAAD,EAAA,MAAKd,GAAce;AAAA,EACvB;AAAA,EAEA,IAAW,UAAUC,GAAiD;AAClE,IAAAF,EAAA,MAAKb,GAAae;AAAA,EACtB;AAAA,EAEA,IAAW,YAAYC,GAAmD;AACtE,IAAAH,EAAA,MAAKZ,GAAee;AAAA,EACxB;AAgCJ;AA3DIlB,IAAA,eACAC,IAAA,eACAC,IAAA,eACAC,IAAA,eA0BAC,IAAA,eAOAC,IAAA,eAKAC,IAAA,eAMAC,IAAA;"}